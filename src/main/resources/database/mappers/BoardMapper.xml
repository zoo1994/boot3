<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
    <mapper namespace="com.sj.boot3.board.BoardMapper">

    	<select id="getDetail" parameterType="BoardVO" resultType="BoardVO">
    		SELECT * FROM BOARD WHERE NUM = #{num}
    	</select>
    	
    	<select id="getList" parameterType="Pager" resultType="BoardVO">

    		SELECT * FROM BOARD WHERE NUM>0 and 
    		<choose>
			<when test="kind==1">title </when>
			<when test="kind==3">writer </when>
			<otherwise>contents</otherwise>
			</choose>
    		
    		
    		like concat('%',#{search},'%') ORDER BY NUM DESC LIMIT #{startRow},#{perPage} 
    	
    		
    		
    	</select>
    	
    	<insert id="setAdd" parameterType="BoardVO">
    		INSERT INTO BOARD(NUM,TITLE,WRITER,CONTENTS,HIT,REGDATE,`REF`,STEP,`DEPTH`,CATEGORY)
			VALUES (NULL,#{title},#{writer},#{contents},0,now(),0,0,0,1);
    	</insert>
    	
    	<update id="setUpdate" parameterType="BoardVO">
    		UPDATE BOARD SET TITLE = #{title} , CONTENTS = #{contents} WHERE NUM =#{num}
    	</update>
    	
    	<delete id="setDelete" parameterType="BoardVO">
    		DELETE FROM BOARD  WHERE NUM=#{num}
    	</delete>
    	
    	
    </mapper>
